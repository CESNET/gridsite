<title>GridSite: Building and Installation Guide</title>
<body>
<h1 align=center>GridSite: Building and Installation Guide</h1>

<p>
This Guide explains how to build GridSite from source, and how to install 
the server components alongside an Apache 2.0 webserver. There is a 
separate <a href="config.html">Config Guide</a> which explains how to modify
the httpd.conf file, and how to set up other files and directories used by
the system. You should look through all of this Building and Installation
Guide to decide which is the easiest route for your system.

<h2>Installing with RPM</h2>

<p>
If you are installing on Linux with a binary RPM release, you can skip
most of this Guide, install the binary rpm(s) and go straight
to the Config Guide.

<!--
<p>
We currently distribute GridSite RPMs for RedHat Linux versions 9 and 7.3
from our download area at 
<a href="https://www.gridsite.org/download/">
https://www.gridsite.org/download/</a>
-->

<p>
<b>RedHat 9, Fedora, RHEL, Scientific Linix</b>:
This is the simpler case, since the standard release includes a suitable
version of Apache 2.0: just install the gridsite-...-1.i386.rpm to get the
various GridSite components. 

<p>
<b>Earlier, eg RedHat 7.3</b>:
This is more complicated because you must also install a back-ported Apache
2.0 RPM or build it from source. 
<!--
We distribute RPMs built on 7.3 aimed at RedHat 7.3 
machines with updates, from our download area. These are built from the 
tar.gz and .spec files distributed by the
Apache Foundation itself, using the 
<a href="build-apache2.sh">build-apache2.sh</a> script in the GridSite
/usr/share/doc/gridsite directory. The Apache RPMs install in /usr, and you
should at least install the httpd and mod_ssl RPMs.
You must also install the gridsite-...-1.i386.rpm as above.
-->

<p>
GridSite also depends on shared libraries from libcurl and libxml2, and the
RPMs distributed as part of the standard RedHat, from 7.3 onwards, are
sufficient. 

<p>
With the RPMs installed, you can proceed to the
<a href="config.html">Config Guide</a>.

<h2>Requirements for building GridSite from source</h2>

<p>
GridSite is currently only supported on Linux, but should be
straightforwardly
portable to other Unix platforms where the GNU build tools are available.

<p>
GridSite consists of a core library (libgridsite[.so|.a]), an Apache module 
(mod_gridsite.so), a CGI utility (gridsite-admin.cgi) and some command line
tools (htcp, urlencode.)

<p>
All of the components use the GridSite library, and this in turn depends on
libcurl and libxml2. You will need the development versions of these
packages installed before you can proceed. 
<!--
(They are available as part of
RedHat Linux releases 7.x onwards, for instance.) 
-->

<h2>Building GridSite with Make</h2>

<p>
Our download area at
<a href="https://www.gridsite.org/download/">
https://www.gridsite.org/download/</a> includes a tar-ball
distribution of the sources, which can be unpacked and used to build
GridSite from source. (Bleeding-edge developers can get the current snapshot
of the same files from our CVS area.)

<p>
GridSite needs a copy of the Apache 2.0 include files to build, and the
location of this is set by the MYCFLAGS variable in the top-level Makefile.
For manual builds, the default
<b>MYCFLAGS=-I/usr/local/include/httpd</b> is used.
If you wish to use the GridSite module with Apache
2.0 installed elsewhere, you should change the MYCFLAGS variable to point to
the includes directory installed by the development part of that Apache 2.0 
distribution.

<p>
<pre>
make 
make install
</pre>

<p>
will build all components and install them all under the default
locations of /usr/local/[lib|bin|include|sbin] The default prefix for manual
builds is
/usr/local, as set by the prefix variable in the top level Makefile
(/usr is the default for RPMs.)

<h2>Building GridSite with RPM</h2>

<p>
For RedHat Linux and derivatives, building with RPM is recommended.
The command <b>make rpm</b> in the top level of the source tree
will build the GridSite and htcp binary RPMs in the
directory ../RPMTMP/RPMS/i386 relative to the working directory. An SRPM is
put into ../RPMTMP/SRPMS
This build assumes the Apache 2.0 includes are in /usr/include/httpd.

<!--
<p>
<b>If you make RPMs on a RedHat 9 system (or a 7.3 system with a 2.0 httpd RPM
installed), you can install the resulting GridSite 
RPM alongside the standard Apache 2.0 RPM without having to
modify shared library or Apache module paths.</b>
-->

<p>
For other configurations,
you can modify the assumed location of the Apache 2.0 includes
by changing the MYCFLAGS variable in the rpm target near the
foot of the top level Makefile.

<h2>Building Apache 2.0</h2>

<p>
If it is not possible to use binary RPMs of Apache 2.0,
then it can be built from source using the build-apache2.sh script
found in the GridSite docs directory.
The script includes instructions on how to build from the tarballs
distributed by the Apache Foundation.
(it removes the -C option from &quot;configure&nbsp;-C&quot; in the .spec file
and builds the RPMs under the current directory.)

<p>
If these targets do not work on your build platform,
the Makefile and the scriptlets in the included SPEC files are a good
starting point for building Apache by hand yourself. The complexities of
this are outside of the scope of this Guide, but you are welcome to ask for
assistance on the 
<a href="http://www.gridsite.org/discuss.html">GridSite
Discussion List</a>, although 
<a href="http://www.apache.org/">www.apache.org</a> is a better starting
point for purely Apache problems.
 
</body>
